---
title: "Streaming"
step: 8
description: "ZStream vs fs2 for streaming data"
zioCommands: []
ceCommands: []
---

# Streaming

ZIO provides ZStream built-in. Cats Effect uses fs2 as the streaming library.

## Creating Streams

<ScalaComparisonBlock
  catsEffectCode={`import cats.effect.IO\nimport fs2.Stream\n\n// Stream from values\nval stream: Stream[IO, Int] =\n  Stream(1, 2, 3, 4, 5)\n\n// Stream from range\nval range: Stream[IO, Int] =\n  Stream.range(1, 10)\n\n// Stream from effect\nval fromEffect: Stream[IO, Int] =\n  Stream.eval(IO.pure(42))`}
  zioCode={`import zio._\nimport zio.stream._\n\n// Stream from values\nval stream: ZStream[Any, Nothing, Int] =\n  ZStream(1, 2, 3, 4, 5)\n\n// Stream from range\nval range: ZStream[Any, Nothing, Int] =\n  ZStream.range(1, 10)\n\n// Stream from effect\nval fromEffect: ZStream[Any, Nothing, Int] =\n  ZStream.fromZIO(ZIO.succeed(42))`}
  catsEffectComment="fs2.Stream - separate library"
  zioComment="ZStream - built into ZIO"
/>

## Transforming Streams

<ScalaComparisonBlock
  catsEffectCode={`import cats.effect.IO\nimport fs2.Stream\n\n// Map elements\nval mapped: Stream[IO, Int] =\n  Stream(1, 2, 3).map(_ * 2)\n\n// Filter elements\nval filtered: Stream[IO, Int] =\n  Stream(1, 2, 3, 4, 5).filter(_ % 2 == 0)\n\n// Take first N\nval taken: Stream[IO, Int] =\n  Stream.range(1, 100).take(5)`}
  zioCode={`import zio._\nimport zio.stream._\n\n// Map elements\nval mapped: ZStream[Any, Nothing, Int] =\n  ZStream(1, 2, 3).map(_ * 2)\n\n// Filter elements\nval filtered: ZStream[Any, Nothing, Int] =\n  ZStream(1, 2, 3, 4, 5).filter(_ % 2 == 0)\n\n// Take first N\nval taken: ZStream[Any, Nothing, Int] =\n  ZStream.range(1, 100).take(5)`}
  catsEffectComment="map / filter / take"
  zioComment="map / filter / take"
/>

## Running Streams

<ScalaComparisonBlock
  catsEffectCode={`import cats.effect.IO\nimport fs2.Stream\n\n// Collect to List\nval list: IO[List[Int]] =\n  Stream(1, 2, 3).compile.toList\n\n// Fold/reduce\nval sum: IO[Int] =\n  Stream(1, 2, 3, 4, 5).compile.fold(0)(_ + _)\n\n// Run for side effects\nval printed: IO[Unit] =\n  Stream(1, 2, 3)\n    .evalMap(i => IO.println(i))\n    .compile.drain`}
  zioCode={`import zio._\nimport zio.stream._\n\n// Collect to Chunk (then List)\nval list: UIO[List[Int]] =\n  ZStream(1, 2, 3).runCollect.map(_.toList)\n\n// Fold/reduce\nval sum: UIO[Int] =\n  ZStream(1, 2, 3, 4, 5).runFold(0)(_ + _)\n\n// Run for side effects\nval printed: UIO[Unit] =\n  ZStream(1, 2, 3)\n    .tap(i => ZIO.succeed(println(i)))\n    .runDrain`}
  catsEffectComment="compile.toList / fold / drain"
  zioComment="runCollect / runFold / runDrain"
/>

## Effectful Operations

<ScalaComparisonBlock
  catsEffectCode={`import cats.effect.IO\nimport fs2.Stream\n\n// Map with effect\nval evalMapped: Stream[IO, Int] =\n  Stream(1, 2, 3).evalMap { i =>\n    IO.println(s"Processing $i").as(i * 2)\n  }\n\n// Filter with effect\nval evalFiltered: Stream[IO, Int] =\n  Stream(1, 2, 3, 4, 5).evalFilter { i =>\n    IO.pure(i % 2 == 0)\n  }`}
  zioCode={`import zio._\nimport zio.stream._\n\n// Map with effect\nval mapZIO: ZStream[Any, Nothing, Int] =\n  ZStream(1, 2, 3).mapZIO { i =>\n    ZIO.succeed(println(s"Processing $i")).as(i * 2)\n  }\n\n// Filter with effect\nval filterZIO: ZStream[Any, Nothing, Int] =\n  ZStream(1, 2, 3, 4, 5).filterZIO { i =>\n    ZIO.succeed(i % 2 == 0)\n  }`}
  catsEffectComment="evalMap / evalFilter"
  zioComment="mapZIO / filterZIO"
/>

## Chunked Processing

<ScalaComparisonBlock
  catsEffectCode={`import cats.effect.IO\nimport fs2.{Stream, Chunk}\n\n// Create from chunk\nval chunked: Stream[IO, Int] =\n  Stream.chunk(Chunk(1, 2, 3, 4, 5))\n\n// Group into chunks\nval grouped: Stream[IO, Chunk[Int]] =\n  Stream.range(1, 100).chunkN(10)`}
  zioCode={`import zio._\nimport zio.stream._\nimport zio.Chunk\n\n// Create from chunk\nval chunked: ZStream[Any, Nothing, Int] =\n  ZStream.fromChunk(Chunk(1, 2, 3, 4, 5))\n\n// Group into chunks\nval grouped: ZStream[Any, Nothing, Chunk[Int]] =\n  ZStream.range(1, 100).grouped(10)`}
  catsEffectComment="Chunk operations"
  zioComment="Chunk operations"
/>

## Concurrent Streams

<ScalaComparisonBlock
  catsEffectCode={`import cats.effect.IO\nimport fs2.Stream\n\n// Merge (interleave)\nval merged: Stream[IO, Int] =\n  Stream(1, 2, 3).merge(Stream(4, 5, 6))\n\n// Zip (pair elements)\nval zipped: Stream[IO, (Int, String)] =\n  Stream(1, 2, 3).zip(Stream("a", "b", "c"))\n\n// Parallel map\nval parMapped: Stream[IO, Int] =\n  Stream(1, 2, 3).parEvalMap(4) { i =>\n    IO.pure(i * 2)\n  }`}
  zioCode={`import zio._\nimport zio.stream._\n\n// Merge (interleave)\nval merged: ZStream[Any, Nothing, Int] =\n  ZStream(1, 2, 3).merge(ZStream(4, 5, 6))\n\n// Zip (pair elements)\nval zipped: ZStream[Any, Nothing, (Int, String)] =\n  ZStream(1, 2, 3).zip(ZStream("a", "b", "c"))\n\n// Parallel map\nval parMapped: ZStream[Any, Nothing, Int] =\n  ZStream(1, 2, 3).mapZIOPar(4) { i =>\n    ZIO.succeed(i * 2)\n  }`}
  catsEffectComment="merge / zip / parEvalMap"
  zioComment="merge / zip / mapZIOPar"
/>

<Callout variant="tip">
ZStream is built into ZIO with no additional dependencies.
fs2 is a separate library but integrates seamlessly with Cats Effect.
</Callout>

## Resource-Safe Streams

<ScalaComparisonBlock
  catsEffectCode={`import cats.effect._\nimport fs2.Stream\nimport java.io.BufferedReader\n\n// Stream with resource\nval lines: Stream[IO, String] =\n  Stream.resource(\n    Resource.fromAutoCloseable(\n      IO.blocking(new BufferedReader(???))\n    )\n  ).flatMap { reader =>\n    Stream.repeatEval(IO.blocking(reader.readLine()))\n      .takeWhile(_ != null)\n  }`}
  zioCode={`import zio._\nimport zio.stream._\nimport java.io.BufferedReader\n\n// Stream with resource\nval lines: ZStream[Any, Throwable, String] =\n  ZStream.fromZIO(\n    ZIO.fromAutoCloseable(\n      ZIO.attemptBlocking(new BufferedReader(???))\n    )\n  ).flatMap { reader =>\n    ZStream.repeatZIO(ZIO.attemptBlocking(reader.readLine()))\n      .takeWhile(_ != null)\n  }`}
  catsEffectComment="Stream.resource for safe acquisition"
  zioComment="ZStream with scoped resources"
/>

## Next Steps

Streaming is powerful in both ecosystems. Let's look at application structure.

[Next: Application Structure â†’](/cats-zio/9)
